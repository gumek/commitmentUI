{"ast":null,"code":"import _asyncToGenerator from \"D:/Backup/Projects/CommitmentUI/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { MatAccordion } from '@angular/material/expansion';\nimport { HttpParams } from '@angular/common/http';\nimport { GlobalVariable } from '../globals';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/material/form-field\";\nimport * as i3 from \"@angular/material/expansion\";\nimport * as i4 from \"@angular/material/input\";\nimport * as i5 from \"@angular/material/card\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/forms\";\nfunction CommitmentListComponent_p_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\")(1, \"em\");\n    i0.ɵɵtext(2, \"Loading...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nconst _c0 = function (a0, a1, a2) {\n  return {\n    \"yellow\": a0,\n    \"red\": a1,\n    \"green\": a2\n  };\n};\nfunction CommitmentListComponent_table_7_tr_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"mat-expansion-panel\", 4)(2, \"mat-expansion-panel-header\")(3, \"mat-panel-title\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"mat-panel-description\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"mat-form-field\", 5)(8, \"mat-label\");\n    i0.ɵɵtext(9, \"Answer\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"input\", 6);\n    i0.ɵɵlistener(\"ngModelChange\", function CommitmentListComponent_table_7_tr_3_Template_input_ngModelChange_10_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const commitment_r3 = restoredCtx.$implicit;\n      return i0.ɵɵresetView(commitment_r3.answer = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function CommitmentListComponent_table_7_tr_3_Template_button_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const commitment_r3 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.sendAnswer(commitment_r3));\n    });\n    i0.ɵɵtext(12, \" Send \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"mat-card\")(14, \"mat-card-content\");\n    i0.ɵɵtext(15);\n    i0.ɵɵpipe(16, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"mat-card\")(18, \"mat-card-content\");\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const commitment_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(11, _c0, commitment_r3.status == \"Due\", commitment_r3.status === \"Overdue\", commitment_r3.status === \"Completed\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", commitment_r3.title, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", commitment_r3.description, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"width\", 400, \"px\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", commitment_r3.answer);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"Deadline: \", i0.ɵɵpipeBind2(16, 8, commitment_r3.deadline, \"yyyy-MM-dd hh:mm\"), \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"Status: \", commitment_r3.status, \"\");\n  }\n}\nfunction CommitmentListComponent_table_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 2)(1, \"tbody\")(2, \"mat-accordion\");\n    i0.ɵɵtemplate(3, CommitmentListComponent_table_7_tr_3_Template, 20, 15, \"tr\", 3);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.commitments)(\"ngForTrackBy\", ctx_r1.identify);\n  }\n}\nexport class CommitmentListComponent {\n  constructor(http, baseUrl) {\n    this.commitments = [];\n    this.baseUrl = baseUrl;\n    this.http = http;\n    this.getCommitments();\n  }\n  getCommitments() {\n    let queryParams = new HttpParams();\n    queryParams = queryParams.append(\"userName\", GlobalVariable.USER_NAME);\n    this.http.get(this.baseUrl + 'commitments', {\n      params: queryParams\n    }).subscribe(result => {\n      this.commitments = result;\n    }, error => console.error(error));\n  }\n  sendAnswer(commitment) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      yield _this.sendCommitment(commitment);\n      _this.getCommitments();\n    })();\n  }\n  sendCommitment(commitment) {\n    return this.http.put(this.baseUrl + 'commitments/' + commitment.id, commitment).toPromise();\n  }\n  // needed so that ngFor does not destroy expandable panel on update and as result collapse all opened panels\n  identify(index, commitment) {\n    return commitment.id;\n  }\n}\nCommitmentListComponent.ɵfac = function CommitmentListComponent_Factory(t) {\n  return new (t || CommitmentListComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject('BASE_URL'));\n};\nCommitmentListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CommitmentListComponent,\n  selectors: [[\"app-commitment-list\"]],\n  viewQuery: function CommitmentListComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(MatAccordion, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.accordion = _t.first);\n    }\n  },\n  decls: 8,\n  vars: 2,\n  consts: [[4, \"ngIf\"], [\"class\", \"table\", \"aria-labelledby\", \"tableLabel\", 4, \"ngIf\"], [\"aria-labelledby\", \"tableLabel\", 1, \"table\"], [4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [3, \"ngClass\"], [\"appearance\", \"fill\"], [\"matInput\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"mat-raised-button\", \"\", 3, \"click\"]],\n  template: function CommitmentListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h2\");\n      i0.ɵɵtext(1, \"My commitments\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"p\");\n      i0.ɵɵtext(3, \"Below you can see the list of your commitments.\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"p\");\n      i0.ɵɵtext(5, \"Please make sure you answer all due and overdue commitments!\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(6, CommitmentListComponent_p_6_Template, 3, 0, \"p\", 0);\n      i0.ɵɵtemplate(7, CommitmentListComponent_table_7_Template, 4, 2, \"table\", 1);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", !(ctx.commitments == null ? null : ctx.commitments.length));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.commitments.length);\n    }\n  },\n  dependencies: [i2.MatFormField, i2.MatLabel, i3.MatAccordion, i3.MatExpansionPanel, i3.MatExpansionPanelHeader, i3.MatExpansionPanelTitle, i3.MatExpansionPanelDescription, i4.MatInput, i5.MatCard, i5.MatCardContent, i6.MatButton, i7.NgClass, i7.NgForOf, i7.NgIf, i8.DefaultValueAccessor, i8.NgControlStatus, i8.NgModel, i7.DatePipe],\n  styles: [\".green[_ngcontent-%COMP%] {\\r\\n  background-color: green;\\r\\n}\\r\\n\\r\\n.red[_ngcontent-%COMP%] {\\r\\n  background-color: #cc0000;\\r\\n}\\r\\n\\r\\n.yellow[_ngcontent-%COMP%] {\\r\\n  background-color: #e5e500;\\r\\n}\\r\\n\\r\\n.mat-mdc-raised-button[_ngcontent-%COMP%] {\\r\\n  margin-left: 10px;\\r\\n  height: 55px !important;\\r\\n  width: 60px !important;\\r\\n  margin-bottom: 20px;\\r\\n}\\n/*# sourceURL=webpack://./src/app/commitments-list/commitment-list.css */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tbWl0bWVudHMtbGlzdC9jb21taXRtZW50LWxpc3QuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsdUJBQXVCO0FBQ3pCOztBQUVBO0VBQ0UseUJBQXlCO0FBQzNCOztBQUVBO0VBQ0UseUJBQXlCO0FBQzNCOztBQUVBO0VBQ0UsaUJBQWlCO0VBQ2pCLHVCQUF1QjtFQUN2QixzQkFBc0I7RUFDdEIsbUJBQW1CO0FBQ3JCIiwic291cmNlc0NvbnRlbnQiOlsiLmdyZWVuIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiBncmVlbjtcclxufVxyXG5cclxuLnJlZCB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2NjMDAwMDtcclxufVxyXG5cclxuLnllbGxvdyB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2U1ZTUwMDtcclxufVxyXG5cclxuLm1hdC1tZGMtcmFpc2VkLWJ1dHRvbiB7XHJcbiAgbWFyZ2luLWxlZnQ6IDEwcHg7XHJcbiAgaGVpZ2h0OiA1NXB4ICFpbXBvcnRhbnQ7XHJcbiAgd2lkdGg6IDYwcHggIWltcG9ydGFudDtcclxuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":";AACA,SAASA,YAAY,QAAQ,6BAA6B;AAC1D,SAAqBC,UAAU,QAAQ,sBAAsB;AAE7D,SAASC,cAAc,QAAQ,YAAY;;;;;;;;;;;;ICC3CC,yBAAgC;IAAIA,0BAAU;IAAAA,iBAAK;;;;;;;;;;;;;IAK7CA,0BAA6D;IAIrDA,YACF;IAAAA,iBAAkB;IAClBA,6CAAuB;IACrBA,YACF;IAAAA,iBAAwB;IAE1BA,yCAAwD;IAC3CA,sBAAM;IAAAA,iBAAY;IAC7BA,iCAAgD;IAAhCA;MAAA;MAAA;MAAA,OAAaA,6CACrC;IAAA,EADuD;IAA/CA,iBAAgD;IAElDA,kCAA2D;IAAjCA;MAAA;MAAA;MAAA;MAAA,OAASA,+CAAsB;IAAA,EAAC;IACxDA,uBACF;IAAAA,iBAAS;IACTA,iCAAU;IACUA,aAA4D;;IAAAA,iBAAmB;IAEnGA,iCAAU;IACUA,aAA6B;IAAAA,iBAAmB;;;;IApBjDA,eAA0I;IAA1IA,8JAA0I;IAGzJA,eACF;IADEA,oDACF;IAEEA,eACF;IADEA,0DACF;IAEgCA,eAAoB;IAApBA,kCAAoB;IAEpCA,eAA+B;IAA/BA,8CAA+B;IAM7BA,eAA4D;IAA5DA,0GAA4D;IAG5DA,eAA6B;IAA7BA,2DAA6B;;;;;IAxB3DA,gCAA6E;IAGvEA,gFAwBK;IACPA,iBAAgB;;;;IAzBaA,eAAgB;IAAhBA,4CAAgB;;;ADEjD,OAAM,MAAOC,uBAAuB;EAOlCC,YAAYC,IAAgB,EAAsBC,OAAe;IAL1D,gBAAW,GAAiB,EAAE;IAMnC,IAAI,CAACA,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACD,IAAI,GAAGA,IAAI;IAEhB,IAAI,CAACE,cAAc,EAAE;EACvB;EAEAA,cAAc;IACZ,IAAIC,WAAW,GAAG,IAAIR,UAAU,EAAE;IAClCQ,WAAW,GAAGA,WAAW,CAACC,MAAM,CAAC,UAAU,EAAER,cAAc,CAACS,SAAS,CAAC;IAEtE,IAAI,CAACL,IAAI,CAACM,GAAG,CAAe,IAAI,CAACL,OAAO,GAAG,aAAa,EAAE;MAAEM,MAAM,EAAEJ;IAAW,CAAE,CAAC,CAACK,SAAS,CAACC,MAAM,IAAG;MACpG,IAAI,CAACC,WAAW,GAAGD,MAAM;IAC3B,CAAC,EAAEE,KAAK,IAAIC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,CAAC;EACnC;EAEME,UAAU,CAACC,UAAsB;IAAA;IAAA;MACrC,MAAM,KAAI,CAACC,cAAc,CAACD,UAAU,CAAC;MACrC,KAAI,CAACZ,cAAc,EAAE;IAAC;EACxB;EAEAa,cAAc,CAACD,UAAsB;IACnC,OAAO,IAAI,CAACd,IAAI,CAACgB,GAAG,CAAa,IAAI,CAACf,OAAO,GAAG,cAAc,GAAGa,UAAU,CAACG,EAAE,EAAEH,UAAU,CAAC,CAACI,SAAS,EAAE;EACzG;EAEA;EACAC,QAAQ,CAACC,KAAa,EAAEN,UAAe;IACrC,OAAOA,UAAU,CAACG,EAAE;EACtB;;AAnCWnB,uBAAuB;mBAAvBA,uBAAuB,4DAOI,UAAU;AAAA;AAPrCA,uBAAuB;QAAvBA,uBAAuB;EAAAuB;EAAAC;IAAA;qBACvB5B,YAAY;;;;;;;;;;;;MCbzBG,0BAAI;MAAAA,8BAAc;MAAAA,iBAAK;MAEvBA,yBAAG;MAAAA,+DAA+C;MAAAA,iBAAI;MACtDA,yBAAG;MAAAA,4EAA4D;MAAAA,iBAAI;MAEnEA,oEAAuD;MAEvDA,4EA8BQ;;;MAhCJA,eAA0B;MAA1BA,iFAA0B;MAEqBA,eAAwB;MAAxBA,6CAAwB","names":["MatAccordion","HttpParams","GlobalVariable","i0","CommitmentListComponent","constructor","http","baseUrl","getCommitments","queryParams","append","USER_NAME","get","params","subscribe","result","commitments","error","console","sendAnswer","commitment","sendCommitment","put","id","toPromise","identify","index","selectors","viewQuery"],"sourceRoot":"","sources":["D:\\Backup\\Projects\\CommitmentUI\\ClientApp\\src\\app\\commitments-list\\commitment-list.component.ts","D:\\Backup\\Projects\\CommitmentUI\\ClientApp\\src\\app\\commitments-list\\commitment-list.html"],"sourcesContent":["import { Component, Inject, ViewChild } from '@angular/core';\r\nimport { MatAccordion } from '@angular/material/expansion';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Commitment } from '../interfaces';\r\nimport { GlobalVariable } from '../globals';\r\n\r\n\r\n@Component({\r\n  selector: 'app-commitment-list',\r\n  templateUrl: './commitment-list.html',\r\n  styleUrls: ['./commitment-list.css']\r\n})\r\nexport class CommitmentListComponent {\r\n  @ViewChild(MatAccordion) accordion: MatAccordion;\r\n  public commitments: Commitment[] = [];\r\n\r\n  private baseUrl: string;\r\n  private http: HttpClient;\r\n\r\n  constructor(http: HttpClient, @Inject('BASE_URL') baseUrl: string) {\r\n    this.baseUrl = baseUrl;\r\n    this.http = http;\r\n\r\n    this.getCommitments();\r\n  }\r\n\r\n  getCommitments() {\r\n    let queryParams = new HttpParams();\r\n    queryParams = queryParams.append(\"userName\", GlobalVariable.USER_NAME);\r\n\r\n    this.http.get<Commitment[]>(this.baseUrl + 'commitments', { params: queryParams }).subscribe(result => {\r\n      this.commitments = result;\r\n    }, error => console.error(error));\r\n  }\r\n\r\n  async sendAnswer(commitment: Commitment) {\r\n    await this.sendCommitment(commitment);\r\n    this.getCommitments();\r\n  }\r\n\r\n  sendCommitment(commitment: Commitment) {\r\n    return this.http.put<Commitment>(this.baseUrl + 'commitments/' + commitment.id, commitment).toPromise();\r\n  }\r\n\r\n  // needed so that ngFor does not destroy expandable panel on update and as result collapse all opened panels\r\n  identify(index: number, commitment: any) {\r\n    return commitment.id;\r\n  };\r\n}\r\n","<h2>My commitments</h2>\r\n\r\n<p>Below you can see the list of your commitments.</p>\r\n<p>Please make sure you answer all due and overdue commitments!</p>\r\n\r\n<p *ngIf=\"!commitments?.length\"><em>Loading...</em></p>\r\n\r\n<table class='table' aria-labelledby=\"tableLabel\" *ngIf=\"commitments.length\">\r\n  <tbody>\r\n    <mat-accordion>\r\n      <tr *ngFor=\"let commitment of commitments; trackBy:identify\">\r\n        <mat-expansion-panel [ngClass]=\"{ 'yellow' : commitment.status == 'Due', 'red' : commitment.status === 'Overdue', 'green' : commitment.status === 'Completed'}\">\r\n          <mat-expansion-panel-header>\r\n            <mat-panel-title>\r\n              {{commitment.title}}\r\n            </mat-panel-title>\r\n            <mat-panel-description>\r\n              {{commitment.description}}\r\n            </mat-panel-description>\r\n          </mat-expansion-panel-header>\r\n          <mat-form-field appearance=\"fill\" [style.width.px]=400 >\r\n            <mat-label>Answer</mat-label>\r\n            <input matInput [(ngModel)]=\"commitment.answer\">\r\n          </mat-form-field>\r\n          <button mat-raised-button (click)=\"sendAnswer(commitment)\">\r\n            Send\r\n          </button>\r\n          <mat-card>\r\n            <mat-card-content>Deadline: {{commitment.deadline | date: 'yyyy-MM-dd hh:mm'}}</mat-card-content>\r\n          </mat-card>\r\n          <mat-card>\r\n            <mat-card-content>Status: {{commitment.status}}</mat-card-content>\r\n          </mat-card>\r\n        </mat-expansion-panel>\r\n      </tr>\r\n    </mat-accordion>\r\n  </tbody>\r\n</table>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}